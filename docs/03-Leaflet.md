# Leaflet

## Getting Started

Leaflet is a [Javascript library](http://leafletjs.com/) that allows users to
create interactive maps that even look good on mobile devices. The wonderful
folks at RStudio created their own Leaflet [R package](https://github.com/rstudio/leaflet)
which allows R users to create their own Leaflet maps without needing to write
any Javascript. Let's get started making some maps!

First you should of course install Leaflet:


```r
install.packages("leaflet")
```

Once you have leaflet installed you can start making maps! You can store your
map in a variable like any other value, in this exmaple let's store our map in
a variable called `my_map`. You need to use the `addTiles()` function to add
a base layer to your map, and you can use the **pipe operator** (`%>%`) to
sequentially add features to your map. Here's how you can make a very simple,
basic map:


```r
library(leaflet)

my_map <- leaflet() %>%
  addTiles()
my_map
```

<!--html_preserve--><div id="htmlwidget-e5243f998922cd6e2b5b" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-e5243f998922cd6e2b5b">{"x":{"calls":[{"method":"addTiles","args":["http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"maxNativeZoom":null,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"continuousWorld":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":null,"unloadInvisibleTiles":null,"updateWhenIdle":null,"detectRetina":false,"reuseTiles":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]}]},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->

Whoa, it's the whole world! In the HTML version of this book you should be able
to move the map around and zoom in and out as you please. You've made your first
interactive map! Leaflet uses free and open source data from the
[OpenStreetMap](https://www.openstreetmap.org/) project.

As lovely as the whole world is, you might want to specifiy a particular 
location and zoom level if you're trying to show a particular location on your
map. You can do this with the `setView()` function by specifying the longitude,
latitude, and the zoom level:


```r
my_map <- my_map %>%
  setView(lat = 39.2898036, lng = -76.6051842, zoom = 13)
my_map
```

<!--html_preserve--><div id="htmlwidget-477591b8f7889c9a05e4" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-477591b8f7889c9a05e4">{"x":{"calls":[{"method":"addTiles","args":["http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"maxNativeZoom":null,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"continuousWorld":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":null,"unloadInvisibleTiles":null,"updateWhenIdle":null,"detectRetina":false,"reuseTiles":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]}],"setView":[[39.2898036,-76.6051842],13,[]]},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->

Ah look it's beautiful Baltimore, the
[Greatest City in America](https://flic.kr/p/aQsDaT)! 

## Adding Markers

This is certainly a more
interesting map than we had before, but it's still lacking features. Let's add
a marker to this map using the `addMarkers()` function:


```r
my_map <- my_map %>%
  addMarkers(lat=39.2980803, lng=-76.5898801, 
             popup="Jeff Leek's Office")
my_map
```

<!--html_preserve--><div id="htmlwidget-b425dc50724ffd0e9249" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-b425dc50724ffd0e9249">{"x":{"calls":[{"method":"addTiles","args":["http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"maxNativeZoom":null,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"continuousWorld":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":null,"unloadInvisibleTiles":null,"updateWhenIdle":null,"detectRetina":false,"reuseTiles":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[39.2980803,-76.5898801,null,null,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},"Jeff Leek's Office",null,null]}],"setView":[[39.2898036,-76.6051842],13,[]],"limits":{"lat":[39.2980803,39.2980803],"lng":[-76.5898801,-76.5898801]}},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->

As you can see you can add a marker just by specifying longitude and latitude.
Optionally you can add some pop up text which appears when you click on the
marker. You don't have to add one marker at a time. To create multiple markers
at once, use a data frame with columns named `lat` and `lng` for latitude and
longitude:


```r
suppressWarnings(set.seed(2016-04-25))
df <- data.frame(lat = runif(20, min = 39.2, max = 39.3),
                 lng = runif(20, min = -76.6, max = -76.5))
df %>% 
  leaflet() %>%
  addTiles() %>%
  addMarkers()
```

<!--html_preserve--><div id="htmlwidget-4454ba301579db739007" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-4454ba301579db739007">{"x":{"calls":[{"method":"addTiles","args":["http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"maxNativeZoom":null,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"continuousWorld":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":null,"unloadInvisibleTiles":null,"updateWhenIdle":null,"detectRetina":false,"reuseTiles":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[[39.209876419045,39.2805048427079,39.2607573956484,39.2382832206553,39.2997803714359,39.2992426184705,39.2382907749386,39.2232731073629,39.2596508674091,39.2345670954324,39.2605881931726,39.27437176737,39.2718355658231,39.2178135712631,39.2296979497885,39.2467381270137,39.2137726823334,39.2656316787237,39.2818019244587,39.237997269514],[-76.5694958843524,-76.5986960883718,-76.5457890132908,-76.5448468535906,-76.5502441728953,-76.5707581372,-76.5957065774593,-76.5785863642814,-76.5327043883037,-76.5400116041768,-76.5283459885046,-76.5800995372469,-76.5557599963853,-76.5563947565621,-76.5596569700399,-76.5671678881859,-76.5640912669711,-76.5213152381824,-76.5717921795091,-76.5052526072366],null,null,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null]}],"limits":{"lat":[39.209876419045,39.2997803714359],"lng":[-76.5986960883718,-76.5052526072366]}},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->

As you can see you can use the pipe operator to pipe a data frame directly into
`leaflet()`.

The default blue "teardrop" icon that Leaflet provides is nice, but you can also
create your own icon with the `makeIcon()` function. You'll need to provide a
few arguments to this function including a link to the URL for your icon, plus
width and height variables. Once you've made an icon object you can use that
icon by specifying the `icon` argument in `addmarkers()`:


```r
hopkinsIcon <- makeIcon(
  iconUrl = "http://brand.jhu.edu/content/uploads/2014/06/university.shield.small_.blue_.png",
  iconWidth = 31*215/230, iconHeight = 31,
  iconAnchorX = 31*215/230/2, iconAnchorY = 16
)

hopkinsLatLong <- data.frame(
  lat = c(39.2973166, 39.3288851, 39.2906617, 39.2970681, 39.2824806),
  lng = c(-76.5929798, -76.6206598, -76.5469683, -76.6150537, -76.6016766))

hopkinsLatLong %>% 
  leaflet() %>%
  addTiles() %>%
  addMarkers(icon = hopkinsIcon)
```

<!--html_preserve--><div id="htmlwidget-3bfa0649aacedb2ce80e" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-3bfa0649aacedb2ce80e">{"x":{"calls":[{"method":"addTiles","args":["http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"maxNativeZoom":null,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"continuousWorld":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":null,"unloadInvisibleTiles":null,"updateWhenIdle":null,"detectRetina":false,"reuseTiles":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[[39.2973166,39.3288851,39.2906617,39.2970681,39.2824806],[-76.5929798,-76.6206598,-76.5469683,-76.6150537,-76.6016766],{"iconUrl":{"data":"http://brand.jhu.edu/content/uploads/2014/06/university.shield.small_.blue_.png","index":0},"iconWidth":28.9782608695652,"iconHeight":31,"iconAnchorX":14.4891304347826,"iconAnchorY":16},null,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null]}],"limits":{"lat":[39.2824806,39.3288851],"lng":[-76.6206598,-76.5469683]}},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->

Now we've nicely mapped out all of the Johns Hopkins campus locations around the
city of Baltimore.
You can customize text pop ups by including any valid HTML code in a vector.
Then you can provide that vector as the `popup` argument in `addMarkers()` like
so:


```r
hopkinsSites <- c(
  "<a href='http://www.jhsph.edu/'>East Baltimore Campus</a>",
  "<a href='https://apply.jhu.edu/visit/homewood/'>Homewood Campus</a>",
  "<a href='http://www.hopkinsmedicine.org/johns_hopkins_bayview/'>Bayview Medical Center</a>",
  "<a href='http://www.peabody.jhu.edu/'>Peabody Institute</a>",
  "<a href='http://carey.jhu.edu/'>Carey Business School</a>"
)

hopkinsLatLong %>% 
  leaflet() %>%
  addTiles() %>%
  addMarkers(icon = hopkinsIcon, popup = hopkinsSites)
```

<!--html_preserve--><div id="htmlwidget-b20a3f9160b4399d1271" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-b20a3f9160b4399d1271">{"x":{"calls":[{"method":"addTiles","args":["http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"maxNativeZoom":null,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"continuousWorld":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":null,"unloadInvisibleTiles":null,"updateWhenIdle":null,"detectRetina":false,"reuseTiles":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[[39.2973166,39.3288851,39.2906617,39.2970681,39.2824806],[-76.5929798,-76.6206598,-76.5469683,-76.6150537,-76.6016766],{"iconUrl":{"data":"http://brand.jhu.edu/content/uploads/2014/06/university.shield.small_.blue_.png","index":0},"iconWidth":28.9782608695652,"iconHeight":31,"iconAnchorX":14.4891304347826,"iconAnchorY":16},null,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},["<a href='http://www.jhsph.edu/'>East Baltimore Campus<\/a>","<a href='https://apply.jhu.edu/visit/homewood/'>Homewood Campus<\/a>","<a href='http://www.hopkinsmedicine.org/johns_hopkins_bayview/'>Bayview Medical Center<\/a>","<a href='http://www.peabody.jhu.edu/'>Peabody Institute<\/a>","<a href='http://carey.jhu.edu/'>Carey Business School<\/a>"],null,null]}],"limits":{"lat":[39.2824806,39.3288851],"lng":[-76.6206598,-76.5469683]}},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->

Each Johns Hopkins campus location now has a pop up with a link to the website
for its respective campus!




```r
df <- data.frame(lat = runif(500, min = 39.25, max = 39.35),
                 lng = runif(500, min = -76.65, max = -76.55))
df %>% 
  leaflet() %>%
  addTiles() %>%
  addMarkers(clusterOptions = markerClusterOptions())
```

<!--html_preserve--><div id="htmlwidget-a92e79292723b69e793c" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-a92e79292723b69e793c">{"x":{"calls":[{"method":"addTiles","args":["http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"maxNativeZoom":null,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"continuousWorld":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":null,"unloadInvisibleTiles":null,"updateWhenIdle":null,"detectRetina":false,"reuseTiles":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[[39.3188069891417,39.3203587884782,39.2854617432458,39.2982521983795,39.2900924243033,39.265300734085,39.2737940107472,39.3017076126998,39.3353464520071,39.2973246233305,39.311046339036,39.2864426238928,39.2938191646477,39.2762501018355,39.255746950605,39.2811526628677,39.2674636283191,39.2695108629996,39.2524891768117,39.2680757104186,39.3254125323612,39.2911478404189,39.2504951070528,39.3091807326069,39.3196114947088,39.2753965097247,39.2959003134165,39.3208975930233,39.3498285877751,39.2945796811953,39.2582432425814,39.3007880396908,39.3120981945889,39.3461011918262,39.271740764589,39.2575619253097,39.2736812530085,39.2549221381778,39.2939696324291,39.3360830842284,39.2607500675833,39.2917287293589,39.3085995331174,39.3474654675694,39.263118647458,39.3130269122776,39.3422339572338,39.2827946770238,39.3125118895434,39.3463580476586,39.3467840559548,39.3134026161628,39.2591994811315,39.348287148145,39.2772629094776,39.3048264015699,39.3192723243032,39.3258381683612,39.3297458109213,39.324660744518,39.3154401555657,39.2853536679642,39.2900156033691,39.3454976150533,39.2712804168928,39.2611868317472,39.2717716612155,39.2877549800323,39.3462989691179,39.2678452552762,39.2594302026788,39.2621554922313,39.3188331353012,39.2559923396446,39.2929099405883,39.2860644448781,39.2814064310631,39.2691772605991,39.3351953408448,39.3354003601475,39.3496483416762,39.3436422630446,39.2594893597066,39.2868147322675,39.3200810239417,39.2598332618363,39.2523553547217,39.2610511466861,39.325517158187,39.3117074313806,39.294259440247,39.346362650441,39.2548649817938,39.2628447503783,39.2865665030899,39.2911850551609,39.2646622045431,39.3234054682311,39.2695709222695,39.2771303151967,39.2817174717784,39.2757409179118,39.2972088853829,39.3063464051345,39.2906508973567,39.3478941832669,39.3154768135399,39.3398936172947,39.2746737402398,39.3198752883822,39.3251185607864,39.2586513323942,39.2573170513613,39.3196188061964,39.265019138949,39.2622566558886,39.2555649298476,39.3399075032445,39.2668448698241,39.2851023349678,39.2774174976163,39.2619135424728,39.3321584991179,39.2627003728645,39.2871555263642,39.2783783533843,39.2721621404402,39.3167106315726,39.332643979392,39.3080975819146,39.2975867773406,39.3291246972978,39.275791370566,39.3017649072455,39.2953199231531,39.2801102734869,39.2634581366787,39.3170654781861,39.2584503823658,39.3187702203402,39.2835266649257,39.2708034906769,39.2814364153659,39.2505937202834,39.3091024922905,39.2876059528207,39.3344684491633,39.2716778116068,39.3461387511576,39.2765380182769,39.3120681012981,39.3223456212785,39.2508806940634,39.2895812551491,39.2607186710462,39.29463372014,39.2926957726479,39.3182850244921,39.2523001310881,39.2530394888716,39.289006089326,39.2577976200031,39.2871793549741,39.3396730807144,39.2618704280816,39.2704549850198,39.2550762937637,39.3025683077984,39.2800209370675,39.3287396574859,39.3363231874537,39.3067454827949,39.3466500486247,39.3271665547974,39.2958087881329,39.3337471495615,39.2640134237241,39.3137978941668,39.2614831086714,39.3023970300332,39.2956075297669,39.2615887175547,39.3492699653376,39.2552642293274,39.2880753981648,39.3365951678483,39.3278849959606,39.2898140551057,39.3354520760709,39.2993977226783,39.2740111406893,39.2999142619316,39.2985339689069,39.2944500831654,39.3352538220817,39.340173267317,39.3425898396643,39.2594686233439,39.3385263767093,39.3399978801375,39.3140483312542,39.3151966748759,39.282125447318,39.2596070923377,39.341657149489,39.3133210737957,39.2773737762356,39.347285279166,39.3063648603624,39.3199736385373,39.332283240254,39.34129759348,39.3196361839538,39.3355250732973,39.3478872543434,39.3497069029138,39.2697946843691,39.3236205336638,39.3164375870954,39.2787685429212,39.3305257213302,39.2510970860952,39.3033865527948,39.2635235934285,39.3125148236286,39.2912848991109,39.2531020725844,39.3491933200974,39.2988758806838,39.2614876816748,39.3143981605768,39.2814028626075,39.2777808252256,39.2855115230428,39.2897886115359,39.3313885297626,39.337093694089,39.3430982963182,39.2998411297333,39.2681110853562,39.3248182696057,39.2604419299401,39.2914314472117,39.3145601321477,39.3074733346235,39.2687839034712,39.3316728362814,39.3009653129848,39.3061577462824,39.3424294338562,39.3238020421471,39.2981826202711,39.3421513889916,39.2947967662243,39.3193436173024,39.2970068379305,39.3481834915001,39.3309327151859,39.3175046385033,39.2816058393102,39.2936825372512,39.2738444410963,39.3407879077364,39.3078934383113,39.3027824086137,39.3331954787485,39.2915294419043,39.3488712718477,39.3133631924633,39.3229988386855,39.3432361233281,39.2659773763968,39.3342021690216,39.2994593046838,39.2841113705421,39.2577580917161,39.2703181470977,39.2659056852106,39.2896706838626,39.2651192449965,39.3004067519913,39.2572811915539,39.3275889954995,39.2508871281752,39.2504827694269,39.3312794778263,39.3249631445855,39.2968901258195,39.2742861391045,39.3292506791651,39.3265908067347,39.2768449147698,39.2533772708615,39.263547607325,39.2798493722919,39.3426489718491,39.3285755844088,39.348394052498,39.2829132697079,39.2936749675544,39.3460465892917,39.3071859435877,39.2653232323471,39.2990210094722,39.3077511073323,39.3134413911263,39.2605760676321,39.2649812106742,39.3432933352655,39.307235272089,39.3408790738555,39.2936926655238,39.3449906511232,39.3191495904233,39.3112284661504,39.2704959839582,39.3123800446745,39.3089995279908,39.3128651000559,39.3480590525549,39.2818589921808,39.2882066230755,39.328844906087,39.3014595985413,39.2538323721383,39.2726183698745,39.2947202159325,39.2755691945553,39.2614746020641,39.2646032437449,39.2676676392322,39.2863981859293,39.3393224146916,39.2613188571762,39.3157263106667,39.2969432387967,39.2634266949957,39.2635447548702,39.251391544845,39.3235790995415,39.2657718576491,39.3352378530893,39.3316181398928,39.3253946017707,39.3239276834065,39.3171011048835,39.3370454000309,39.3222537684254,39.3395540022524,39.2899601303507,39.2849415478995,39.3113213727949,39.2542976992205,39.3473720889073,39.3164668568876,39.319297324121,39.2994465615135,39.2552197995828,39.2887935392559,39.3446201226441,39.2897068733349,39.3039740195498,39.2907425305573,39.2823540671263,39.2680023368448,39.2508723063627,39.3302650410682,39.3017148570623,39.339163481025,39.3265868986025,39.3380181927001,39.3401999523863,39.2950777159305,39.2982015800197,39.3200354382163,39.3451390439644,39.3202808920294,39.344531046669,39.3193929501111,39.2754285552073,39.2578613264253,39.2541582410689,39.2625947160879,39.3248793212464,39.3468424285529,39.3198777194368,39.2510629863013,39.2678261024412,39.2630109783495,39.3011290684808,39.2754395943834,39.2525913672755,39.3488431293285,39.2568855762715,39.3229182005161,39.2814584861044,39.3398393345065,39.3457103992347,39.3092964187963,39.257827249635,39.3085022588959,39.2914987737779,39.2697600514628,39.30994421551,39.3314516510582,39.3090860893484,39.3463765760651,39.2574795000022,39.3004626272013,39.2500926374458,39.2979944723425,39.292363707535,39.3148318297695,39.2928628999041,39.2843918040162,39.313777232985,39.3077946567908,39.3283209951129,39.3212530744961,39.2518731064163,39.2700879045529,39.3423094815109,39.3134795920923,39.3344043752644,39.3144042661646,39.3455194417853,39.3337071463466,39.3340832944261,39.2515143823344,39.2575870602857,39.3495555667207,39.2882525028195,39.3180936007062,39.3447848291602,39.2533347831806,39.2887560489587,39.3315801880555,39.3054551453795,39.2847490323475,39.3361718573375,39.3240987195866,39.3393285270315,39.2802580957068,39.3422096529743,39.3105021444382,39.3213715757243,39.2646741633071,39.3013650629437,39.2524190560449,39.2543496283004,39.278558636317,39.3443850713084,39.2892150682397,39.3283293879824,39.2574617599836,39.308451670059,39.3156736414647,39.2902998000383,39.3445375942858,39.3085991080385,39.3306112530408,39.2700062668882,39.3299523519119,39.2955539228627,39.2860232280567,39.3292961800238,39.326354372222,39.3254957031226,39.3255546118133,39.2602666286519,39.3434384649387,39.2688092340017,39.2623101936886,39.2696740586543,39.3414118127199,39.2778547842521,39.2896215143148,39.2543074326124,39.2686607576441,39.3174963245634,39.3484406572767,39.288359853765,39.297755431477,39.3309071399271,39.3090493895812,39.2792524547316,39.2959083551774,39.3392489976948,39.2907476923661,39.3196183979511,39.3457958233776,39.3015140103176,39.2636321584694,39.3084218777716,39.2730121325469,39.3445776629495,39.2521682771388,39.2931518049445,39.2993439353071,39.3419443608262],[-76.5717087509343,-76.6391623559175,-76.6303526561475,-76.5579917731928,-76.6494674253278,-76.6353738990845,-76.6234788911417,-76.648205476976,-76.5813831868349,-76.5580102901673,-76.5569577890448,-76.6498468164122,-76.6022875450086,-76.5822213260457,-76.6307000926929,-76.5762579046423,-76.6466566787334,-76.6219928701641,-76.5786894746823,-76.628581285174,-76.581619861559,-76.646978349844,-76.6130044692895,-76.5613810722716,-76.5639374253806,-76.5616788892774,-76.5693096601404,-76.6193848914234,-76.5514596555382,-76.5783072673017,-76.5541928288061,-76.6029727212386,-76.6090194229735,-76.6430042722961,-76.6439012733987,-76.6301694605965,-76.5524478852516,-76.6326346389949,-76.6185760374647,-76.5743935282575,-76.6006859248737,-76.5984204270178,-76.6033756906167,-76.5826193927787,-76.5899380884832,-76.5944827144733,-76.5796418911777,-76.5683500361862,-76.5778265000787,-76.5712861046428,-76.5555901803309,-76.5757585687563,-76.633035097667,-76.6065373224672,-76.5782696326729,-76.6377854794031,-76.6391285784077,-76.5527691554744,-76.6356837444008,-76.5977092260262,-76.5691531608114,-76.6171959189931,-76.5884780650958,-76.6002265807008,-76.5535157772712,-76.5889224886894,-76.5804635142908,-76.6201291914331,-76.6493783585494,-76.6079479501816,-76.57996888333,-76.5608994812239,-76.6439795573708,-76.5973057570169,-76.5902815169189,-76.6076484672725,-76.5545207682531,-76.5638122917851,-76.6294550981373,-76.6404113562545,-76.57033919401,-76.5949997477932,-76.5897414523875,-76.6068983442383,-76.6052458207821,-76.6084152425174,-76.6324580168119,-76.5811567300931,-76.6196458294056,-76.550633592275,-76.567590183299,-76.5601524707861,-76.6342263474595,-76.5563094446668,-76.5645699638873,-76.6428628074471,-76.598402768583,-76.6069519026205,-76.5627243368188,-76.6281110546785,-76.6065347464289,-76.5947568665026,-76.6230571796885,-76.6479998633266,-76.6278934830334,-76.6235955755226,-76.6245287223253,-76.5702876369469,-76.6281114021316,-76.5941756294807,-76.5952257978963,-76.6460242494242,-76.5553134493297,-76.5740409675753,-76.6347049650038,-76.6185343499761,-76.6253274890594,-76.5988719835645,-76.6069126422983,-76.5606716438895,-76.5778596917633,-76.5564415248111,-76.5670919492608,-76.6484560718062,-76.5575549634406,-76.5866896285443,-76.6265926014166,-76.5628217195859,-76.6029846084071,-76.6272863762919,-76.560755271255,-76.5841746320017,-76.6354722988559,-76.5825783965643,-76.5946693047415,-76.5687211674172,-76.6347227620427,-76.6321468523238,-76.5873892589938,-76.6403686430771,-76.565703502344,-76.5721920521464,-76.6038303553592,-76.6445355403703,-76.6083861044142,-76.5831619658275,-76.5606030774768,-76.5830924971495,-76.6264949782053,-76.5931110224687,-76.5899653688772,-76.5632917044917,-76.6260602692608,-76.6208392046625,-76.6216057950864,-76.5578761563171,-76.6377864081413,-76.5738441733178,-76.5631103469525,-76.5723216685466,-76.5528383750003,-76.616152509721,-76.6452450605808,-76.6209443270229,-76.646727186488,-76.5727715957677,-76.5748319706647,-76.5984151465586,-76.5909901637351,-76.5552820144454,-76.6130995517597,-76.5974665385671,-76.647664619633,-76.5634668162093,-76.588220544369,-76.6289775587153,-76.5888452350395,-76.6461312394822,-76.5703316973755,-76.6163915129146,-76.5700420768,-76.5533528223867,-76.6469761257293,-76.6163010736695,-76.5611949976301,-76.5656345366035,-76.5888079683762,-76.615638092556,-76.6149052290712,-76.6176893938566,-76.5836373192025,-76.5743982213782,-76.5907422527205,-76.6164121588925,-76.6122144542169,-76.6052716332255,-76.6240357149392,-76.6330816086615,-76.6374244526261,-76.6252350919182,-76.5817327551078,-76.6071783973603,-76.5960236049956,-76.6395346655743,-76.6220273790648,-76.5634719074005,-76.6297687115381,-76.6341031025164,-76.6231186564779,-76.5573324305471,-76.6202088216553,-76.5580780861899,-76.6435996004147,-76.6480924851727,-76.566106351139,-76.5897352690343,-76.564336243202,-76.5620558511,-76.5857846150175,-76.5593391866423,-76.5551001311978,-76.633065152308,-76.5847631594399,-76.6336928442121,-76.5511955833063,-76.5592182541965,-76.61517361796,-76.6268773343647,-76.6038826882839,-76.6250917229801,-76.6148174035363,-76.6276302006561,-76.6089327943744,-76.5576207606355,-76.6128122554626,-76.6427881936543,-76.5651173225371,-76.5916722366121,-76.6077515597222,-76.6485332564916,-76.5782000475563,-76.5629651086172,-76.582958719437,-76.6157967486652,-76.6275842834264,-76.6317743556341,-76.5684727791231,-76.6073824475519,-76.6186092497781,-76.5550099672982,-76.6239425329724,-76.6015942804283,-76.6191908597015,-76.6486390493112,-76.5838289543288,-76.5505304161459,-76.5640937018907,-76.5567615849664,-76.5773275607033,-76.6041048060637,-76.6182347726077,-76.6206155840773,-76.6495859898627,-76.6045964456163,-76.6438382302411,-76.5557394684292,-76.5738411357161,-76.6169699622551,-76.599113513832,-76.6367889828747,-76.6387325813994,-76.552512305649,-76.5830856274115,-76.5637003676267,-76.646381158242,-76.6458473305451,-76.6458308456466,-76.6137835713802,-76.6490496262908,-76.637272782065,-76.6470286197495,-76.642510419921,-76.5849457707955,-76.5636790798046,-76.5736015578499,-76.6207744909218,-76.6324981861049,-76.6416389506077,-76.5743973876815,-76.6381440336583,-76.5608524554642,-76.5717245924752,-76.5869449806632,-76.5523515951121,-76.611145717348,-76.5795195474289,-76.5942660778295,-76.5818422931712,-76.587643325259,-76.5714533321327,-76.598956338712,-76.5576109818416,-76.5568858603947,-76.6175141133601,-76.6321810493944,-76.5900434038369,-76.5602141448762,-76.5630900944816,-76.5689099232899,-76.5574679017998,-76.5606993694091,-76.5590261495672,-76.5800612593535,-76.5704088258324,-76.5995193920098,-76.6248975241557,-76.5991507319268,-76.5972187535372,-76.5625678462908,-76.5643500024453,-76.640408507199,-76.5922038730932,-76.6401539267739,-76.5998984699138,-76.6153201336972,-76.6386635764968,-76.6103666559327,-76.6350417251699,-76.6332942510722,-76.6069094729144,-76.6207216565497,-76.6034375573276,-76.5631398395635,-76.5608727534302,-76.5609615527093,-76.6350318701705,-76.5579881006386,-76.6285820195917,-76.6435925615486,-76.5834767295979,-76.5742714632535,-76.5740570701426,-76.57732757302,-76.5562276116805,-76.6189544663299,-76.6161691080546,-76.6256251000566,-76.5809720088262,-76.613990096841,-76.5958710618084,-76.5575343918521,-76.5587124192389,-76.6044504694873,-76.615117114014,-76.6342345643323,-76.6150708577596,-76.6378101104638,-76.5916156861,-76.6096355145332,-76.6468565521063,-76.5610759411706,-76.6314324080013,-76.6467111055041,-76.5992215252016,-76.5640197871253,-76.6076742845122,-76.5816873066826,-76.6074172938708,-76.5679761391832,-76.5634151782375,-76.587601515674,-76.5723042505095,-76.5708532181336,-76.6406233123969,-76.6453325726092,-76.5587721163174,-76.6272403533571,-76.5708987697028,-76.6029781612335,-76.5941452329746,-76.6421453793068,-76.641257424769,-76.561084480444,-76.5874866543105,-76.5922697509406,-76.6457228341606,-76.5993668647017,-76.5984465115937,-76.5776778107742,-76.6312251916621,-76.63953608335,-76.6011575224111,-76.6187774205813,-76.6254139322555,-76.5747223525774,-76.5529711112846,-76.5525759778218,-76.6404329961166,-76.6063992744312,-76.5643549794564,-76.5784196569352,-76.5693863484776,-76.6380686040968,-76.631330395327,-76.5862521816045,-76.5804747801507,-76.5863169147167,-76.553724248521,-76.5802439524792,-76.5769926229259,-76.5741874716245,-76.6241695148172,-76.6247323729331,-76.5550389352022,-76.5755251942435,-76.6211607750272,-76.5780575651675,-76.5963343309937,-76.5696211780189,-76.5935365413781,-76.6001222248422,-76.606114996993,-76.5712502369657,-76.5523737045703,-76.5905878501711,-76.5503209264483,-76.6307637515478,-76.5786432906752,-76.5703222495271,-76.6111693558982,-76.632695312053,-76.5895779777318,-76.6357334214496,-76.6382648896193,-76.5559214288136,-76.6003657335416,-76.5828684806591,-76.6121261928463,-76.6257431293605,-76.6066797174281,-76.5843067791313,-76.5768472447293,-76.5941075420706,-76.6249140167609,-76.6029725600965,-76.6474655628903,-76.551745240856,-76.5731716291513,-76.6003467398463,-76.6312880304409,-76.6058335899143,-76.6450043503661,-76.5823539408855,-76.5932758433046,-76.6325985810254,-76.6293638089206,-76.6279096621322,-76.5567824386526,-76.5901028005872,-76.6134457803797,-76.6018281356199,-76.6436985883629,-76.6072383737424,-76.6241200999822,-76.6093687395565,-76.6025479582138,-76.5972683545901,-76.5549034816446,-76.6020203672117,-76.579543659417,-76.597058942169,-76.5549468016485,-76.6493280275492,-76.5824370118091,-76.5508528848179,-76.5743065008428,-76.6028058516094,-76.573669592198,-76.6488796658814,-76.562527791108,-76.644281652756,-76.5596703198738,-76.612847335916,-76.6068351184251,-76.6406603487674,-76.6175198051613,-76.558203958231,-76.5582794201327,-76.6492863204563,-76.5619486988056,-76.6285319002345,-76.5812099608593,-76.569269907847,-76.6087361920159,-76.5692866653903,-76.5974843192846,-76.6323957568966,-76.5964904109249,-76.6142140014097,-76.622142114467],null,null,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,{"showCoverageOnHover":true,"zoomToBoundsOnClick":true,"spiderfyOnMaxZoom":true,"removeOutsideVisibleBounds":true},null]}],"limits":{"lat":[39.2500926374458,39.3498285877751],"lng":[-76.6498468164122,-76.5503209264483]}},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->


```r
df <- data.frame(lat = runif(20, min = 39.25, max = 39.35),
                 lng = runif(20, min = -76.65, max = -76.55))
df %>% 
  leaflet() %>%
  addTiles() %>%
  addCircleMarkers()
```

<!--html_preserve--><div id="htmlwidget-78120a44a0fb4e3aa6f0" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-78120a44a0fb4e3aa6f0">{"x":{"calls":[{"method":"addTiles","args":["http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"maxNativeZoom":null,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"continuousWorld":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":null,"unloadInvisibleTiles":null,"updateWhenIdle":null,"detectRetina":false,"reuseTiles":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addCircleMarkers","args":[[39.309606691706,39.2638813432306,39.3278050527442,39.304757290706,39.3396625288995,39.2775495983893,39.2984750298317,39.2983887013979,39.3487434391864,39.3308425069787,39.3331866551191,39.3144338675076,39.281416187319,39.3192283950513,39.3095800822834,39.2629593014019,39.3346613100031,39.3408851066837,39.2925886180019,39.3022538424702],[-76.5507525540888,-76.6220493492903,-76.5737339117797,-76.5507621126017,-76.5901020226302,-76.5879718480399,-76.6490098421928,-76.6247427826747,-76.5926543611567,-76.5788212660234,-76.5571190182352,-76.5645553305047,-76.6327407075092,-76.6403780461755,-76.5660436785547,-76.5850074790884,-76.618044189224,-76.5923414172372,-76.5514736851212,-76.5606351349736],10,null,null,{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2,"dashArray":null},null,null,null]}],"limits":{"lat":[39.2629593014019,39.3487434391864],"lng":[-76.6490098421928,-76.5507525540888]}},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->

## Drawing


```r
md_cities <- data.frame(name = c("Baltimore", "Frederick", "Rockville", "Gaithersburg", 
                                 "Bowie", "Hagerstown", "Annapolis", "College Park", "Salisbury", "Laurel"),
                        pop = c(619493, 66169, 62334, 61045, 55232,
                                39890, 38880, 30587, 30484, 25346),
                        lat = c(39.2920592, 39.4143921, 39.0840, 39.1434, 39.0068, 39.6418, 38.9784, 38.9897, 38.3607, 39.0993),
                        lng = c(-76.6077852, -77.4204875, -77.1528, -77.2014, -76.7791, -77.7200, -76.4922, -76.9378, -75.5994, -76.8483))
md_cities %>%
  leaflet() %>%
  addTiles() %>%
  addCircles(weight = 1, radius = sqrt(md_cities$pop) * 30)
```

```
## Assuming 'lng' and 'lat' are longitude and latitude, respectively
```

<!--html_preserve--><div id="htmlwidget-84231ba37582ebbd7b11" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-84231ba37582ebbd7b11">{"x":{"calls":[{"method":"addTiles","args":["http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"maxNativeZoom":null,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"continuousWorld":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":null,"unloadInvisibleTiles":null,"updateWhenIdle":null,"detectRetina":false,"reuseTiles":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addCircles","args":[[39.2920592,39.4143921,39.084,39.1434,39.0068,39.6418,38.9784,38.9897,38.3607,39.0993],[-76.6077852,-77.4204875,-77.1528,-77.2014,-76.7791,-77.72,-76.4922,-76.9378,-75.5994,-76.8483],[23612.3632870579,7717.00071271216,7490.03337776275,7412.18591240128,7050.44679435282,5991.74432031274,5915.40362105579,5246.74184613652,5237.90034269458,4776.12813898455],null,null,{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":true,"color":"#03F","weight":1,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2,"dashArray":null},null]}],"limits":{"lat":[38.3607,39.6418],"lng":[-77.72,-75.5994]}},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->


```r
leaflet() %>%
  addTiles() %>%
  addRectangles(lat1 = 37.3858, lng1 = -122.0595, 
                lat2 = 37.3890, lng2 = -122.0625)
```

<!--html_preserve--><div id="htmlwidget-8a12943a92a59350216b" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-8a12943a92a59350216b">{"x":{"calls":[{"method":"addTiles","args":["http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"maxNativeZoom":null,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"continuousWorld":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":null,"unloadInvisibleTiles":null,"updateWhenIdle":null,"detectRetina":false,"reuseTiles":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addRectangles","args":[37.3858,-122.0595,37.389,-122.0625,null,null,{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2,"dashArray":null,"smoothFactor":1,"noClip":false},null]}],"limits":{"lat":[37.3858,37.389],"lng":[-122.0625,-122.0595]}},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->


```r
df <- data.frame(lat = runif(20, min = 39.25, max = 39.35),
                 lng = runif(20, min = -76.65, max = -76.55),
                 col = sample(c("red", "blue", "green"), 20, replace = TRUE),
                 stringsAsFactors = FALSE)

df %>%
  leaflet() %>%
  addTiles() %>%
  addCircleMarkers(color = df$col) %>%
  addLegend(labels = LETTERS[1:3], colors = c("blue", "red", "green"))
```

## Conclusion

For more details about the leaflet package for R 
visit http://rstudio.github.io/leaflet/.
